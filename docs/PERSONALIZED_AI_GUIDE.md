# 个性化AI分析规范 V5.0

## 核心原则：基于具体数据的个性化洞察

**禁止使用模板化套话**，每条分析必须：
1. 引用**具体数据点**（如HRV 52.8ms，不是"HRV良好"）
2. 与**历史数据对比**（如"较上周平均上升3.2ms"）
3. 提供**可操作的个性化建议**（不是"多运动"，而是"今晚22:30前入睡"）
4. 建立**指标间关联**（如"睡眠不足可能导致HRV下降"）

---

## 1. 指标分析模板（150-200字）

### HRV分析模板

**结构：**
1. 今日数值 + 数据点数量（20-30字）
2. 与历史对比 + 趋势判断（30-40字）
3. 生理机制解释 + 当前状态评估（40-50字）
4. 与其他指标关联分析（30-40字）
5. 个性化建议（30-40字）

**示例：**
```
心率变异性今日为52.8ms（基于51个数据点测量）。较近期平均上升2.1ms。

从生理机制看，HRV反映交感神经与副交感神经的动态平衡。您的数值处于良好水平，
表明自主神经系统调节能力良好，身体具备较强的恢复潜力和压力适应力。

结合今日睡眠2.8小时、步数6,852步的活动量，睡眠不足可能是限制HRV进一步提升的因素。

建议：优先保证今晚7-8小时睡眠，避免高强度训练，可尝试睡前10分钟冥想放松。
```

---

### 睡眠分析模板

**结构：**
1. 睡眠时长 + 结构数据（如果有）（20-30字）
2. 与推荐标准对比（20-30字）
3. 睡眠阶段分析（如果有实际数据）（30-40字）
4. 与HRV/活动量关联（30-40字）
5. 个性化改善建议（40-50字）

**无睡眠数据时的分析：**
```
今日未检测到有效睡眠数据。从健康角度看，睡眠是身体修复、记忆巩固和免疫调节的
关键时期。

未记录睡眠可能的原因包括：Apple Watch未佩戴或电量不足、睡眠模式未开启。

结合今日活动数据（步数6,852步，活动消耗564千卡），缺乏睡眠记录使得无法准确
评估恢复状态。

强烈建议：检查Apple Watch睡眠追踪设置，确保就寝时正确佩戴设备；同时建立固定
作息时间，目标每晚23:00前入睡，保证7-8小时优质睡眠。
```

---

### 运动分析模板

**结构：**
1. 运动类型 + 时长 + 心率数据（20-30字）
2. 心率区间分析 + 训练效果（40-50字）
3. 与恢复状态关联（30-40字）
4. 与整体活动量关联（20-30字）
5. 个性化恢复建议（30-40字）

**无运动数据时的分析：**
```
今日未记录到结构化运动数据。从活动量看，步数6,852步、活动消耗564千卡，属于
中等日常活动水平。

未进行结构化运动意味着错过了专门提升心肺功能、肌肉力量和骨密度的机会。规律
运动（每周150分钟中等强度）可降低心血管疾病风险30-40%。

从恢复角度看，今日HRV 52.8ms显示身体状态良好，是进行中等强度运动的合适时机。

强烈建议：明日安排30-45分钟中等强度运动，如快走、慢跑、骑行或游泳。选择您
喜欢的运动形式更容易坚持，从每周2-3次开始逐步建立习惯。
```

---

## 2. AI建议模板（250-300字）

### 最高优先级建议

**结构：**
1. 问题识别：具体数据 + 健康影响（80-100字）
2. 行动计划：5个具体步骤，含时间/数量（100-120字）
3. 预期效果：量化结果 + 时间线（70-80字）

**示例（睡眠不足）：**
```
【最高优先级】改善睡眠时长和质量

问题识别：昨夜仅睡2.8小时，远低于7-9小时推荐标准。短期睡眠不足会立即影响
今日认知功能（注意力下降30-40%）和情绪稳定性；长期与肥胖、糖尿病、心血管
疾病风险增加50-70%相关。今日HRV 52.8ms可能已受睡眠不足影响。

行动计划：
1. 今晚就寝时间提前至22:30（比平时早60-90分钟），设定闹钟提醒开始睡前准备
2. 建立睡前1小时「无屏幕时间」：21:30后关闭手机/电脑/电视，蓝光抑制褪黑素分泌达50%
3. 卧室环境优化：温度调至18-20°C，使用遮光窗帘，白噪音减少噪音干扰
4. 睡前放松仪式：10分钟温和拉伸→5分钟深呼吸（4-7-8呼吸法）→阅读纸质书15分钟
5. 避免午后咖啡因：14:00后停止摄入咖啡、茶、可乐等含咖啡因饮品

预期效果：通过上述措施，预期3-5天内入睡时间缩短至20分钟以内，睡眠效率提升
至85%以上，1周内睡眠时长稳定在7小时以上。相应的，HRV应提升5-10ms，日间精力
和工作效率显著改善。
```

---

## 3. 数据关联规则

### HRV与睡眠关联
- HRV < 50 + 睡眠 < 6h → "睡眠不足可能是HRV偏低的因素之一"
- HRV > 55 + 睡眠 > 7h → "充足睡眠有助于维持良好HRV水平"
- HRV 45-55 + 睡眠 6-7h → "睡眠对HRV有正向影响，建议继续保持"

### HRV与运动关联
- HRV > 50 + 有运动 → "适度运动配合良好恢复，HRV保持在理想范围"
- HRV < 45 + 有高强度运动 → "运动强度可能超出当前恢复能力，建议降低强度"
- HRV > 55 + 无运动 → "身体状态良好，是开始规律训练的合适时机"

### 步数与能量关联
- 步数 > 8000 + 能量 < 300 → "步数达标但强度偏低，建议增加快走或爬坡"
- 步数 < 5000 + 能量 > 400 → "可能进行了高强度短时运动，建议增加日常步行"
- 步数 > 10000 + 能量 > 500 → "活动量充足，今日恢复应重点关注"

---

## 4. 个性化程度检查清单

生成分析后，必须验证：

- [ ] 引用了至少3个具体数据点（含数值）
- [ ] 与历史数据进行了对比（如果有）
- [ ] 解释了指标间的关联（如睡眠→HRV）
- [ ] 建议包含具体时间/数量（如"22:30前入睡"而不是"早点睡"）
- [ ] 预期效果可量化（如"HRV提升5-10ms"）
- [ ] 没有使用"良好""注意""适当"等模糊词汇

---

## 5. 禁止使用的模板化表达

❌ **禁止：**
- "各项指标正常，继续保持"
- "建议多运动、早睡早起"
- "注意身体健康"
- "适当休息"
- "保持良好习惯"

✅ **替换为：**
- "HRV 52.8ms处于良好区间（45-65ms），较上周平均上升2.1ms"
- "建议明日进行30分钟快走（目标心率120-140bpm），今晚22:30前入睡"
- "步数6,852步低于推荐目标3,148步，建议饭后步行15分钟"
- "今晚提前60分钟就寝，目标睡眠时长7.5小时"
- "每周二、四、六固定运动，每次30-45分钟"

---

## 6. 代码实现示例

```python
class PersonalizedAIAnalyzer:
    def analyze_hrv(self) -> str:
        hrv = self.data['hrv']['value']
        points = self.data['hrv']['points']
        
        # 与历史对比
        if self.history:
            prev_hrv = [h['hrv']['value'] for h in self.history]
            avg_hrv = sum(prev_hrv) / len(prev_hrv)
            diff = hrv - avg_hrv
            trend = f"较近期平均{'上升' if diff > 0 else '下降'}{abs(diff):.1f}ms"
        else:
            trend = "暂无历史数据对比"
        
        # 结合其他指标
        sleep_hours = self.data['sleep']['total'] if self.data.get('sleep') else 0
        sleep_comment = "充足的睡眠有助于维持良好的HRV水平" if sleep_hours >= 7 else \
                       "睡眠不足可能是HRV偏低的因素之一" if sleep_hours < 6 else \
                       ""
        
        return f"""心率变异性今日为{hrv:.1f}ms（基于{points}个数据点测量）。{trend}。

从生理机制看，HRV反映交感神经与副交感神经的动态平衡。您的数值处于{'优秀' if hrv > 55 else '良好'}水平，
表明自主神经系统调节能力良好。{sleep_comment}

建议：{'继续保持当前作息规律' if hrv > 50 else '优先保证7-8小时睡眠，减少晚间蓝光暴露'}。"""
```

---

## 7. 周报/月报个性化分析

### 周报趋势分析（200-250字）

**必须包含：**
1. 本周平均值与上周/历史平均对比
2. 波动范围（最高/最低值）
3. 趋势判断（上升/下降/稳定）
4. 可能的影响因素分析
5. 下周针对性建议

**示例：**
```
本周HRV平均50.6ms，较上周（48.2ms）上升2.4ms（+5%），整体趋势向好。
本周HRV波动范围45.7-54.8ms，标准差4.2ms，表明恢复状态相对稳定。

上升趋势可能与睡眠质量改善相关：本周平均睡眠5.2小时，虽然仍低于推荐标准，
但较上周（4.8小时）有所提升。周三和周五的7.6-7.7小时睡眠对HRV提升贡献明显。

但周五、周六步数仅1,993和2,688步，活动量骤降可能导致HRV短期波动。

下周建议：保持睡眠改善势头，目标6.5-7小时；同时稳定日常活动量，避免工作日
与周末活动量差距过大（理想差距<30%）。
```

### 月报长期分析（250-300字）

**必须包含：**
1. 月度平均值与目标对比
2. 达成率计算
3. 趋势方向（改善/恶化/稳定）
4. 主要影响因素识别
5. 下月具体目标（量化）

---

**版本**: 5.0  
**更新日期**: 2026-02-22  
**更新内容**: 添加个性化AI分析规范，删除模板化表达，要求基于具体数据生成洞察
